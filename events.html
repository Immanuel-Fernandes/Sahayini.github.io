<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Events - Sahayini Social Development Society</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style> body { font-family: 'Inter', sans-serif; } </style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- Header -->
<header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
  <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
    <a href="index.html" class="text-2xl font-bold text-gray-800">Sahayini<span class="text-blue-500">.</span></a>
    <div class="hidden md:flex items-center space-x-8">
      <a href="index.html" class="font-semibold text-gray-800">Home</a>
      <a href="about.html" class="text-gray-600 hover:text-gray-800">About Us</a>
      <a href="events.html" class="text-gray-600 hover:text-gray-800">Events</a>
      <a href="gallery.html" class="text-gray-600 hover:text-gray-800">Gallery</a>
      <a href="contact.html" class="text-gray-600 hover:text-gray-800">Contact</a>
    </div>
  </nav>
</header>

<!-- Hero -->
<section class="bg-blue-500 text-white py-16 text-center">
  <h1 class="text-4xl md:text-5xl font-extrabold">Our Events</h1>
  <p class="mt-4 text-lg">Explore our initiatives, campaigns, and community gatherings.</p>
</section>

<!-- Search + Filter -->
<section class="py-10 container mx-auto px-6">
  <form id="filterForm" class="flex flex-col md:flex-row gap-4 justify-center items-center">
    <input id="searchInput" type="text" placeholder="Search events..." class="px-4 py-2 rounded-md border w-full md:w-1/3">

    <select id="yearFilter" class="px-4 py-2 rounded-md border">
      <option value="">All Years</option>
    </select>

    <select id="sortSelect" class="px-4 py-2 rounded-md border">
      <option value="event_date">Sort by Date</option>
      <option value="title">Sort by Title</option>
      <option value="location">Sort by Location</option>
    </select>

    <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-md">Search</button>
  </form>
</section>

<!-- Event Cards -->
<section class="py-10">
  <div class="container mx-auto px-6">
    <div id="eventGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
  </div>
</section>

<!-- Footer -->
<!-- Footer -->
<footer class="bg-gray-800 text-white">
    <!-- Developer Credit Line (Separate Look) -->
    <div class="bg-gray-900 py-4 border-t border-gray-700 text-center">
        <p class="text-sm text-gray-300 leading-snug">
            Site Developed by 
            <a href="https://www.linkedin.com/in/immanuel-fernandes/" target="_blank"
               class="text-white hover:text-blue-400 transition-colors font-semibold no-underline">
                Immanuel Fernandes
            </a> ~ 
            <a href="https://www.youtube.com/@I.M.A.G.E." target="_blank"
               class="text-white hover:text-blue-400 transition-colors font-semibold no-underline">
                IMAGE (Immanuel Multimedia Animators & Graphical Editors)
            </a>
        </p>
    </div>

    <!-- Main Footer Content -->
    <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- About -->
                <div class="col-span-1 md:col-span-2">
                    <h4 class="text-xl font-bold mb-4">Sahayini Social Development Society</h4>
                    <p class="text-gray-400 leading-relaxed">A registered non-profit organization working towards the empowerment of marginalized communities through sustainable development initiatives.</p>
                </div>
                <!-- Quick Links -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="about.html" class="text-gray-400 hover:text-white transition">About Us</a></li>
                        <li><a href="events.html" class="text-gray-400 hover:text-white transition">Events</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition">Get Involved</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                    </ul>
                </div>
                <!-- Newsletter -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Newsletter</h4>
                    <p class="text-gray-400 mb-4">Stay updated with our latest work.</p>
                    <form>
                        <div class="flex">
                            <input type="email" class="w-full rounded-l-lg p-2 text-gray-800" placeholder="your.email@example.com">
                            <button type="submit" class="bg-orange-500 hover:bg-orange-600 text-white font-bold p-2 rounded-r-lg">Sign Up</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-gray-700 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-500 text-sm">&copy; 2025 Sahayini Social Development Society. All Rights Reserved.</p>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <!-- Social Media Icons with updated URLs -->
                    <a href="https://www.facebook.com/Sahayini/" target="_blank" class="text-white hover:text-blue-500 transition duration-300">
                        <!-- Facebook -->
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="https://twitter.com/Sahayini" target="_blank" class="text-white hover:text-blue-500 transition duration-300">
                        <!-- Twitter -->
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/sahayini/" target="_blank" class="text-white hover:text-blue-500 transition duration-300">
                        <!-- Instagram -->
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.206.056 2.003.248 2.47.415a4.92 4.92 0 011.675 1.09 4.92 4.92 0 011.09 1.675c.167.467.359 1.264.415 2.47.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.056 1.206-.248 2.003-.415 2.47a4.92 4.92 0 01-1.09 1.675 4.92 4.92 0 01-1.675 1.09c-.467.167-1.264.359-2.47.415-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.206-.056-2.003-.248-2.47-.415a4.92 4.92 0 01-1.675-1.09 4.92 4.92 0 01-1.09-1.675c-.167-.467-.359-1.264-.415-2.47C2.175 15.747 2.163 15.367 2.163 12s.012-3.584.07-4.85c.056-1.206.248-2.003.415-2.47a4.92 4.92 0 011.09-1.675 4.92 4.92 0 011.675-1.09c.467-.167 1.264-.359 2.47-.415C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.735 0 8.332.012 7.052.07 5.733.127 4.666.308 3.8.645a7.08 7.08 0 00-2.563 1.678A7.08 7.08 0 00.645 4.8C.308 5.666.127 6.733.07 8.052.012 9.332 0 9.735 0 12c0 2.265.012 2.668.07 3.948.057 1.319.238 2.386.575 3.252a7.08 7.08 0 001.678 2.563 7.08 7.08 0 002.563 1.678c.866.337 1.933.518 3.252.575 1.28.058 1.683.07 3.948.07s2.668-.012 3.948-.07c1.319-.057 2.386-.238 3.252-.575a7.08 7.08 0 002.563-1.678 7.08 7.08 0 001.678-2.563c.337-.866.518-1.933.575-3.252.058-1.28.07-1.683.07-3.948s-.012-2.668-.07-3.948c-.057-1.319-.238-2.386-.575-3.252a7.08 7.08 0 00-1.678-2.563A7.08 7.08 0 0020.2.645C19.334.308 18.267.127 16.948.07 15.668.012 15.265 0 12 0zM12 5.838A6.162 6.162 0 105.838 12 6.162 6.162 0 0012 5.838zm0 10.162A3.998 3.998 0 1116 12a3.998 3.998 0 01-4 4zm6.406-11.845a1.44 1.44 0 11-1.44-1.44 1.44 1.44 0 011.44 1.44z" />
                        </svg>
                    </a>
                </div>
            </div>

        </div>
</footer>

<script>
async function loadEvents() {
  const response = await fetch("eventdbase.json");
  const data = await response.json();
  
  // Extract tables
  const events = data.find(d => d.type === "table" && d.name === "events").data;
  const eventImages = data.find(d => d.type === "table" && d.name === "event_images").data;

  const searchInput = document.getElementById("searchInput");
  const yearFilter = document.getElementById("yearFilter");
  const sortSelect = document.getElementById("sortSelect");
  const eventGrid = document.getElementById("eventGrid");

  // Populate year filter
  const years = [...new Set(events.map(e => new Date(e.event_date).getFullYear()))].sort((a,b)=>b-a);
  years.forEach(y => {
    let opt = document.createElement("option");
    opt.value = y;
    opt.textContent = y;
    yearFilter.appendChild(opt);
  });

  function render() {
    let filtered = [...events];

    // Search
    const query = searchInput.value.toLowerCase();
    if(query){
      filtered = filtered.filter(e =>
        e.title.toLowerCase().includes(query) ||
        e.location.toLowerCase().includes(query)
      );
    }

    // Year
    if(yearFilter.value){
      filtered = filtered.filter(e => new Date(e.event_date).getFullYear() == yearFilter.value);
    }

    // Sort
    const sortKey = sortSelect.value;
    filtered.sort((a,b)=>{
      if(sortKey === "event_date"){
        return new Date(b.event_date) - new Date(a.event_date);
      }
      return a[sortKey].localeCompare(b[sortKey]);
    });

    // Render cards
    eventGrid.innerHTML = "";
    filtered.forEach(event => {
      // Find first image from event_images table
      const firstImg = eventImages
        .filter(img => img.event_id == event.id)
        .sort((a,b)=>a.id - b.id)[0];

      const imgSrc = firstImg ? `uploads/${firstImg.image}` : `uploads/${event.image}`;

      const card = `
        <div class="bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
          <img src="${imgSrc}" alt="${event.title}" class="w-full h-48 object-cover">
          <div class="p-6 flex flex-col flex-grow">
            <h3 class="text-xl font-bold mb-2 text-gray-800">${event.title}</h3>
            <div class="text-gray-600 text-sm mb-4 space-y-1">
              <p><strong>📍 Location:</strong> ${event.location}</p>
              <p><strong>📅 Date:</strong> ${new Date(event.event_date).toLocaleDateString()}</p>
            </div>
            <div class="mt-auto">
              <a href="event.html?id=${event.id}" class="bg-blue-500 text-white w-full text-center py-2 px-4 rounded-lg block hover:bg-blue-600">Read More →</a>
            </div>
          </div>
        </div>
      `;
      eventGrid.innerHTML += card;
    });
  }

  document.getElementById("filterForm").addEventListener("submit", e => {
    e.preventDefault();
    render();
  });

  render();
}

loadEvents();
</script>


</body>
</html>
